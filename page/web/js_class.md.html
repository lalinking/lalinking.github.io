<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="keywords" content="js,class">
	<meta name="description" content="JS 简单实现类与继承">
	<meta name="author" content="lalinking">
	<meta name="copyright" content="lalinking">
	<link href="/resource/main.css" type="text/css" rel="stylesheet">
	<link href="/resource/md.css" type="text/css" rel="stylesheet">
	<link href="/3rd-lib/gitalk/gitalk.css" type="text/css" rel="stylesheet">
	<link href="/3rd-lib/prism/prism.css" type="text/css" rel="stylesheet">
	<title>打工姿态 -> 学习姿态</title>
</head>
<body>
<noscript>## 实现代码

  有几个特点：
1. 这种实现的机制是先执行 superClass 构造函数，再执行自己的构造函数，因此能拷贝 superClass 的属性到子类的示例上。但也意味着不能在父类构造器中执行太耗性能的动作，父类构造器应该以定义属性字段和实例方法为主功能。
2. 只能有一个 superClass。
3. 支持 super 参数。
4. 可以定义一个 init 方法。

```javascript
// 引入 Class 的定义
module.exports = function(superClass, constructor) {
    let fun = function() {
        superClass.apply(this);
        if (constructor) {
            let _supper = {...this};
            constructor.call(this, _supper);
        }
        if (this.init)  {
            let init = this.init.apply(this, arguments);
            if (init instanceof fun) {
                return init;
            }
        }
        return this;
    };
    fun.toString = null;
    return fun;
}
```

## 使用示例

  常见使用方法，以及缺陷展示

```javascript
let Class = require('./class');
var Animal = new Class(function () {
    this.type = "animal";
    this.say = function (words) {
        console.log(this.type + " say: " + words);
    }
});
Animal instanceof Class                    // false
var Dog = new Class(Animal, function () {
    this.type = "Dog";
});
var myDogInstance = new Dog();
myDogInstance instanceof Dog               // true
myDogInstance instanceof Animal            // false （一个小缺陷，按理来说应该返回 true）
myDogInstance.say("汪汪汪");               // Dog say: 汪汪汪

var Cat = new Class(Animal, function (_super) {
    this.type = "Cat";
    this.init = function (name) {
        // _super 是 Animal 的实例
        // _super instanceof Animal == false (一个小缺陷，按理来说应该返回 true)
        _super.say("i am a cat, name is " + name)
    }
});
// 执行了 init 方法
var myCatInstance = new Cat("凯瑟琳");     // animal say: i am a cat, name is 凯瑟琳
myCatInstance instanceof Cat               // true
myCatInstance instanceof Animal            // false
myCatInstance.say("喵喵喵");               // Cat say: 喵喵喵
```</noscript>
<div id="header"></div>
<div id="main">
	<div id="board" class="curb">
		<div class="face front">
			<div id="bookshelf"><div id="bookshelf_left"></div><div id="bookshelf_inner"></div><div id="bookshelf_right"></div></div>
			<div class="talk" data-click="talk_switch" tabindex="1"><i class="icon close" data-click="talk_close"></i><div id="talk"></div></div>
		</div>
		<div class="face back"></div>
	</div>
	<div id="tools">
		<div class='icon index_close' data-click='index_close' title="回到桌面"></div>
	</div>
</div>
<div id="foot"></div>
</body>
<script src="/resource/upgrade.js"></script>
<script src="/resource/pageInit.js"></script>
<script>
	initBookShelf('{"maxThickness":4,"maxHeight":10,"P35186368":{"BookId":"P35186368","BookName":"课外题","contents":[{"FileTitle":"demo","BookName":"课外题","Date":"2019-12-19","Description":"一个博文的demo","Keywords":"demo,markdown","FilePath":"demo.md"},{"FileTitle":"magnet 魔链增加 tracker","Date":"2019-10-08","Description":"magnet 魔链增加 tracker，更新服务器信息，获取更快的下载速度","Keywords":"magnet,tracker","FilePath":"/page/magnet/mag.html"},{"FileTitle":"图片转字符画","Date":"2019-10-08","Description":"图片转字符画","Keywords":"图片,字符画","FilePath":"/page/pic/pic.html"},{"FileTitle":"图灵机器人实用","Date":"2015-10-12","Description":"调用图灵机器人的api实现自动聊天","Keywords":"图灵机器人","FilePath":"/page/wx_yuki/wx.html"}]},"M-154268230":{"BookId":"M-154268230","BookName":"Java 笔记","contents":[{"FileTitle":"Spring-Cloud 微服务学习日志","BookName":"Java 笔记","Date":"2019-11-21","Description":"spring cloud 微服务配置与应用","Keywords":"java,spring cloud","FilePath":"java/spring-cloud.md"},{"FileTitle":"“自适应”的 String 转 Date 工具","BookName":"Java 笔记","Date":"2018-11-09","Description":"预先注册可能用到的日期格式，之后可通过传入的字符串特征自动转换成 Date 对象，而不需要另外指定格式。","Keywords":"java,DateFormat","FilePath":"java/dateFormatter.md"}]},"P665848904":{"BookId":"P665848904","BookName":"Web & Node","contents":[{"FileTitle":"Js 简单实现类与继承","BookName":"Web & Node","Date":"2019-05-27","Description":"JS 简单实现类与继承","Keywords":"js,class","FilePath":"web/js_class.md"},{"FileTitle":"NodeJs 简单实现“模板文件”","BookName":"Web & Node","Date":"2018-03-07","Description":"简单的字符串模板实现","Keywords":"node,template","FilePath":"web/nodejs_template.md"}]}}');
</script>
<script src="/3rd-lib/markedjs/marked.js"></script>
<script src="/3rd-lib/prism/prism.js"></script>
<script data-runat="init">
	console.log("fresh at: 2021-11-06T03:00:03.623Z");
	var mdContent = $("noscript")[0].innerText;
	if (mdContent.length) {
		$("#P665848904").setAttribute("data-status", "post_loading");
		showPost("web/js_class.md", "Js 简单实现类与继承", "2019-05-27", mdContent);
	} else {
		initTalk("index.html", "首页");
	}
</script>
</html>